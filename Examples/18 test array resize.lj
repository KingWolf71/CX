// Test Array Resize (V1.022.64) - Simplified
// Syntax: array arr[newSize] - resize existing array

#pragma appname "Array-Resize-Test"
#pragma decimals 3
#pragma console on
#pragma consolesize "640x400"
#pragma consoleposition "30,50"
#pragma optimizecode on
#pragma ListASM on
#pragma FastPrint on
#pragma RunThreaded on
#pragma ftoi "truncate"
#pragma version on
#pragma modulename on
#pragma PasteToClipboard on
#pragma floattolerance 0.0001
#pragma stackspace 2048
#pragma stackdepth 1024

print("=== ARRAY RESIZE TEST (V1.022.64) ===");
print("");

// TEST 1: Simple integer array - just check if resize compiles
print("TEST 1: Create and populate small array");
print("---------------------------------------");

array arr.i[3];
arr[0] = 100;
arr[1] = 200;
arr[2] = 300;

print("  arr[0] = ", arr[0], " (expected 100)");
print("  arr[1] = ", arr[1], " (expected 200)");
print("  arr[2] = ", arr[2], " (expected 300)");
assertEqual(100, arr[0]);
assertEqual(200, arr[1]);
assertEqual(300, arr[2]);
print("  Initial array works!");
print("");

// TEST 2: Now resize - this should emit ARRAYRESIZE opcode
print("TEST 2: Resize array from 3 to 6");
print("--------------------------------");

array arr.i[6];

print("  Array resized to 6 elements");

// Check original elements still there
print("  arr[0] = ", arr[0], " (expected 100)");
assertEqual(100, arr[0]);
print("  arr[1] = ", arr[1], " (expected 200)");
assertEqual(200, arr[1]);
print("  arr[2] = ", arr[2], " (expected 300)");
assertEqual(300, arr[2]);
print("  Original elements preserved!");

// Try to use new elements
print("  Setting arr[3] = 400...");
arr[3] = 400;
print("  arr[3] = ", arr[3], " (expected 400)");
assertEqual(400, arr[3]);

print("  Setting arr[5] = 600...");
arr[5] = 600;
print("  arr[5] = ", arr[5], " (expected 600)");
assertEqual(600, arr[5]);

print("");
print("=== ARRAY RESIZE TEST PASSED ===");
