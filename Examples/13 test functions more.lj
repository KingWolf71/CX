/* Comprehensive Function Test Suite
   Tests: parameters, return values, recursion, nesting, types
*/

#pragma appname "LJ2 Function Test Suite"
#pragma console on
#pragma optimizecode on
#pragma version
//--------------------------------------
// Test 1: Simple integer functions
//--------------------------------------

func add(a, b) {
    return a + b;
}

func multiply(x, y) {
    return x * y;
}

func square(n) {
    return n * n;
}

//--------------------------------------
// Test 2: Float functions
//--------------------------------------

func circleArea(radius.f) {
    pi.f = 3.14159265359;
    return pi * radius * radius;
}

func celsiusToFahrenheit(c.f) {
    return c * 9.0 / 5.0 + 32.0;
}

//--------------------------------------
// Test 3: String functions
//--------------------------------------

func greet(name.s) {
    return "Hello, " + name + "!";
}

func makeTitle(word.s) {
    return "*** " + word + " ***";
}

//--------------------------------------
// Test 4: Mixed parameter types
//--------------------------------------

func formatPrice(item.s, price.f) {
    return item + ": $" + price;
}

func describe(name.s, age, height.f) {
    return name.s + " is " + age + " years old and " + height + "m tall";
}

//--------------------------------------
// Test 5: Functions calling functions
//--------------------------------------

func pythagorean(a.f, b.f) {
    aSquared.f = square(a);
    bSquared.f = square(b);
    return aSquared + bSquared;
}

func volumeOfCylinder(radius.f, height.f) {
    baseArea.f = circleArea(radius);
    return baseArea * height;
}

//--------------------------------------
// Test 6: Recursive functions
//--------------------------------------

func factorial(n) {
    if (n <= 1) {
        return 1;
    }
    return n * factorial(n - 1);
}

func fibonacci(n) {
    if (n <= 1) {
        return n;
    }
    return fibonacci(n - 1) + fibonacci(n - 2);
}

//--------------------------------------
// Test 7: No parameters
//--------------------------------------

func getPi() {
    return 3.14159265359;
}

func getGreeting() {
    return "Welcome to LJ2!";
}

//--------------------------------------
// MAIN PROGRAM - Run all tests
//--------------------------------------

print("\n=== Test 1: Integer Functions ===\n");
result = add(5, 3);
print("add(5, 3) = ", result, "\n");

result = multiply(7, 6);
print("multiply(7, 6) = ", result, "\n");

result = square(9);
print("square(9) = ", result, "\n");

print("\n=== Test 2: Float Functions ===\n");
area.f = circleArea(5.0);
print("circleArea(5.0) = ", area, "\n");

temp.f = celsiusToFahrenheit(25.0);
print("celsiusToFahrenheit(25.0) = ", temp, "\n");

print("\n=== Test 3: String Functions ===\n");
greeting.s = greet("Alice");
print(greeting, "\n");

title.s = makeTitle("FUNCTIONS WORK");
print(title, "\n");

print("\n=== Test 4: Mixed Types ===\n");
price.s = formatPrice("Coffee", 3.50);
print(price, "\n");

info.s = describe("Bob", 25, 1.75);
print(info, "\n");

print("\n=== Test 5: Nested Calls ===\n");
hypotenuse.f = pythagorean(3.0, 4.0);
print("pythagorean(3, 4) = ", hypotenuse, " (should be 25)\n");

volume.f = volumeOfCylinder(2.0, 5.0);
print("cylinder volume(r=2, h=5) = ", volume, "\n");

print("\n=== Test 6: Recursion ===\n");
fact5 = factorial(5);
print("factorial(5) = ", fact5, " (should be 120)\n");

fib7 = fibonacci(7);
print("fibonacci(7) = ", fib7, " (should be 13)\n");

print("\n=== Test 7: No Parameters ===\n");
pi.f = getPi();
print("getPi() = ", pi, "\n");

msg.s = getGreeting();
print(msg, "\n");

print("\n=== Test 8: Deeply Nested ===\n");
deep = add(multiply(square(2), 3), square(add(1, 2)));
print("add(multiply(square(2), 3), square(add(1, 2))) = ", deep, "\n");
print("Breakdown: square(2)=4, 4*3=12, add(1,2)=3, square(3)=9, 12+9=21\n");

print("\n=== Test 9: Multiple Returns ===\n");
func maxOfThree(a, b, c) {
    if (a >= b && a >= c) {
        return a;
    }
    if (b >= c) {
        return b;
    }
    return c;
}

max = maxOfThree(15, 27, 12);
print("maxOfThree(15, 27, 12) = ", max, " (should be 27)\n");

print("\n=== All Tests Complete! ===\n");
